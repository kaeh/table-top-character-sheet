<form [formGroup]="characterForm">
  <section formGroupName="general" class="flex flex-col gap-4">
    <h3>Général</h3>
    <section>
      <app-image-selector formControlName="avatar" label="Avatar du personnage" />
    </section>
    <section class="flex flex-row flex-wrap gap-4">
      <mat-form-field>
        <mat-label>{{ Labels.character.general.firstName }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.firstName" formControlName="firstName" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.lastName }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.lastName" formControlName="lastName" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.age }}</mat-label>
        <input matInput type="number" formControlName="age" [min]="Rules.ageRange.min" [max]="Rules.ageRange.max" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.luck }}</mat-label>
        <input matInput type="number" formControlName="luck" [min]="0" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.archetype }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.archetype" formControlName="archetype" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.fetish }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.fetish" formControlName="fetish" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.favoriteSong }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.favoriteSong"
          formControlName="favoriteSong" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.problem }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.problem" formControlName="problem" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.drive }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.drive" formControlName="drive" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.pride }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.pride" formControlName="pride" />
      </mat-form-field>

      <mat-form-field>
        <mat-label>{{ Labels.character.general.socle }}</mat-label>
        <input matInput type="text" [placeholder]="Labels.character.general.socle" formControlName="socle" />
      </mat-form-field>
    </section>
  </section>

  <section formGroupName="attributes">
    <h3>
      Attributs

      @if (remainingAttributePoints !== null && remainingAttributePoints !== undefined) {
      <span [class.text-red-500]="remainingAttributePoints !== 0">({{ remainingAttributePoints }} points
        restants)</span>
      }
    </h3>
    <section class="flex flex-row flex-wrap gap-4">
      @for (attribute of characterForm.controls.attributes.controls | appControlsToKeysLabels :
      Labels.character.attributes; track attribute.key) {
      <mat-form-field>
        <mat-label>{{ attribute.label }}</mat-label>
        <input matInput type="number" [formControlName]="attribute.key" [min]="Rules.attributeRange.min"
          [max]="Rules.attributeRange.max" />
      </mat-form-field>
      }
    </section>
  </section>

  <section formGroupName="skills">
    <h3>
      Compétences

      @if (remainingSkillPoints !== null && remainingSkillPoints !== undefined) {
      <span [class.text-red-500]="remainingSkillPoints !== 0">({{ remainingSkillPoints }} points
        restants)</span>
      }
    </h3>
    <section class="flex flex-row flex-wrap gap-4">
      @for (skill of characterForm.controls.skills.controls | appControlsToKeysLabels : Labels.character.skills;
      track
      skill.key) {
      <mat-form-field>
        <mat-label>{{ skill.label }}</mat-label>
        <input matInput type="number" [formControlName]="skill.key" [min]="Rules.skillRange.min"
          [max]="Rules.skillRange.max" />
      </mat-form-field>
      }
    </section>
  </section>
</form>
